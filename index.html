<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Management Portal | GPS Pethgam Wagoora</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
</head>

<body>

<header>
    <div class="logo-section">
        <img src="file_0000000044d471fab24858b72be56d0a.png" alt="School Logo">
        <div>
            <h1>Government Primary School Pethgam Wagoora</h1>
            <p style="font-size: 0.8rem; margin: 0; opacity: 0.8;">Smart AI-Based Management System</p>
        </div>
    </div>
    <div id="liveDateTime" aria-live="polite"></div>
</header>

<nav aria-label="Main Navigation">
    <ul class="nav-links">
        <li><a href="#home">Home</a></li>
        
        <li class="dropdown">
            <a href="javascript:void(0)" class="dropbtn">Administration â–¾</a>
            <div class="dropdown-content">
                <a href="#about">About School</a>
                <a href="#staff">Staff Statement</a>
                <a href="#committee">School Committee</a>
                <a href="#infrastructure">Infrastructure</a>
            </div>
        </li>

        <li class="dropdown">
            <a href="javascript:void(0)" class="dropbtn">Academics â–¾</a>
            <div class="dropdown-content">
                <a href="#routine">Class Routine</a>
                <a href="#calendar">Academic Calendar</a>
                <a href="#downloads">Syllabus & Forms</a>
                <a href="#results">Results</a>
            </div>
        </li>

        <li class="dropdown">
            <a href="javascript:void(0)" class="dropbtn">Management â–¾</a>
            <div class="dropdown-content">
                <a href="#attendanceSection">Daily Attendance</a>
                <a href="#generator">Certificate Generator</a>
                <a href="#mdm-portal">MDM Daily Record</a>
                <a href="#scholarships">Scholarships</a>
            </div>
        </li>

        <li class="dropdown">
            <a href="javascript:void(0)" class="dropbtn">Diaries â–¾</a>
            <div class="dropdown-content">
                <a href="#diaries">Teacher's Diary</a>
                <a href="#diaries">Student's Diary</a>
            </div>
        </li>

        <li><a href="#gallery">Gallery</a></li>
        <li><a href="#contact">Contact</a></li>
    </ul>
</nav>

<main>
    <section class="hero" id="home">
        <h2>Empowering Education Through Digital Innovation</h2>
        <p>Record Attendance, Generate Certificates, and Manage MDM Statements Seamlessly.</p>
        <button type="button" class="btn-ai" onclick="chatOpen()">Ask AI Assistant</button>
    </section>

    <section class="cards" id="quick-actions">
        <div class="card" id="attendanceSection">
            <h3>ðŸ“Š Attendance System</h3>
            <div class="input-group">
                <input type="number" id="totalStudents" placeholder="Total Students">
                <input type="number" id="presentStudents" placeholder="Present Today">
            </div>
            <button id="attendanceBtn">Update Attendance</button>
            <p id="attendanceResult"></p>
        </div>

        <div class="card" id="generator">
            <h3>ðŸ“œ Document Generator</h3>
            <p>Generate Bonafide & ID Cards</p>
            <input type="text" id="studentName" placeholder="Student Name">
            <select id="docType">
                <option value="bonafide">Bonafide Certificate</option>
                <option value="idcard">Student ID Card</option>
            </select>
            <button onclick="generatePDF()">Download PDF</button>
        </div>

        <div class="card">
            <h3>ðŸŒ¤ Weather & Notices</h3>
            <p id="weather">Loading...</p>
            <hr style="border: 0.5px solid rgba(255,255,255,0.1)">
            <p style="font-size: 0.9rem;"><strong>Notice:</strong> Admissions 2026 Open!</p>
        </div>
    </section>

    <section id="diaries" class="info-section">
        <h2>Daily Diaries</h2>
        <div class="diary-grid" style="display: flex; gap: 20px; justify-content: center;">
            <div class="card" style="width: 45%;">
                <h4>Teacher's Diary</h4>
                <textarea placeholder="Enter today's lesson plan..." style="width: 100%; border-radius: 8px; padding: 10px;"></textarea>
                <button style="margin-top: 10px;">Save Entry</button>
            </div>
            <div class="card" style="width: 45%;">
                <h4>Student's Diary</h4>
                <p>Latest Homework: Math Exercise 4.2</p>
            </div>
        </div>
    </section>

    <section id="middaymeal" class="info-section">
        <h2>Mid-Day Meal (MDM)</h2>
        <div class="card" style="max-width: 600px; margin: auto;">
            <p>Daily Nutrition Tracking & Monthly Statement Generation</p>
            <button>Generate Monthly MDM Report (PDF)</button>
        </div>
    </section>

    <div id="pdf-template" style="display: none; padding: 40px; color: black; background: white; font-family: serif; border: 10px double #333;">
        <center>
            <h2>GOVERNMENT PRIMARY SCHOOL PETHGAM WAGOORA</h2>
            <h3>BONAFIDE CERTIFICATE</h3>
        </center>
        <br><br>
        <p>This is to certify that Master/Miss <strong id="pdf-n"></strong> is a bonafide student of this institution studying in Class _______ under Roll No: ______.</p>
        <br>
        <p>Date: <span id="pdf-date"></span></p>
        <br><br><br>
        <p style="text-align: right;">Headmaster Signature</p>
    </div>

</main>

<footer>
    <p>Â© 2026 Government Primary School Pethgam Wagoora | Designed with AI</p>
</footer>

<script>
    // PDF Generator Logic
    function generatePDF() {
        const name = document.getElementById('studentName').value;
        if(!name) { alert("Please enter a student name"); return; }
        
        document.getElementById('pdf-n').innerText = name.toUpperCase();
        document.getElementById('pdf-date').innerText = new Date().toLocaleDateString();
        
        const element = document.getElementById('pdf-template');
        element.style.display = 'block'; // Temporarily show to capture
        
        html2pdf().from(element).save(name + '_Certificate.pdf').then(() => {
            element.style.display = 'none'; // Hide again
        });
    }

    // Attendance Logic
    document.getElementById('attendanceBtn').addEventListener('click', function() {
        const total = document.getElementById('totalStudents').value;
        const present = document.getElementById('presentStudents').value;
        const res = document.getElementById('attendanceResult');
        if (total > 0 && present >= 0) {
            const percentage = ((present / total) * 100).toFixed(1);
            res.innerHTML = `Success: <strong>${percentage}%</strong> recorded.`;
            res.style.color = "#44ff44";
        }
    });

    function updateClock() {
        document.getElementById('liveDateTime').innerText = new Date().toLocaleString();
    }
    setInterval(updateClock, 1000);
    updateClock();
</script>

</body>
</html>
